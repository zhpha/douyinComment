# 抖音直播评论提取器

## 简介
这是一个 Chrome / Edge 浏览器插件，用于提取抖音直播间的评论内容并保存到本地 IndexedDB 数据库中。插件支持导出 CSV 和 JSON 格式。

## 目录结构
- `manifest.json`: 插件配置文件
- `content.js`: 网页脚本，负责解析直播间 DOM 提取评论
- `background.js`: 后台服务，负责将数据存储到 IndexedDB
- `popup.html` & `popup.js`: 插件弹窗界面

## 安装方法
1. 打开 Chrome 浏览器，进入扩展程序页面 (`chrome://extensions/`)。
2. 打开右上角的 **开发者模式** 开关。
3. 点击 **加载已解压的扩展程序**。
4. 选择本项目所在的文件夹（`f:\抖音评论区`）。

## 使用步骤
1. 打开任意一个抖音直播间页面 (`live.douyin.com`).
2. **刷新页面**（如果是首次安装插件，必须刷新）。
3. 点击浏览器右上角的插件图标，打开插件面板。
4. 这里的状态通常显示 "未运行"，点击 **开始提取**。
5. 评论区的新消息会自动抓取。你可以在面板上看到已保存的数量。
6. 点击 **导出 CSV** 下载保存的数据。

## 常见问题与调试

### 1. 点击“开始提取”后没有数据增加？
这通常是因为抖音更新了网页结构，导致插件内置的选择器失效。
你可以按 `F12` 打开开发者工具，查看 `Console` (控制台) 面板。插件会输出日志。

如果看到 `未找到评论容器`，你需要修改 `content.js` 中的 `CONFIG` 变量。

**如何修复：**
1. 在直播间页面右键点击评论区的消息列表，选择“检查”。
2. 找到消息列表的父容器 `div`，查看它的 class 或 id。
3. 打开 `content.js`，找到顶部的 `CONFIG`：
   ```javascript
   const CONFIG = {
       // 修改这里的选择器以匹配当前的抖音页面
       containerSelector: 'div[class*="webcast-chatroom"] ...', 
       // ...
   };
   ```
4. 修改后保存文件，回到扩展程序页面点击刷新图标重载插件。
5. 刷新直播间页面重试。

### 2. ID和内容混在一起？
`content.js` 中目前的解析逻辑是将整行文本作为内容保存。因为昵称和内容的 DOM 结构经常变化且混淆。你可以导出数据后使用 Excel 进一步清洗分割。
